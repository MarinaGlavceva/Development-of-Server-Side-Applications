extends layout

block content
  h1 Список задач
  form(method="get", action="/", style="margin-bottom:12px")
    label(for="status") Фильтр:&nbsp;
    select(name="status", id="status", onchange="this.form.submit()")
      option(value="all", selected=status==='all') Все задачи
      option(value="active", selected=status==='active') Активные
      option(value="completed", selected=status==='completed') Выполненные

  if tasks.length
    ul.todo-list
      each t in tasks
        - const itemClass = 'todo-item' + (t.completed ? ' done' : '')
        li(class=itemClass)
          // кнопки слева
          .actions
            form(action='/' + t.id + '/toggle' + (status !== 'all' ? '?status=' + status : ''), method='post')
              button.btn.btn-icon(type='submit', class=(t.completed ? 'done' : '')) #{t.completed ? '✓' : '○'}
          // сама задача
          .todo-title #{t.title}
          // кнопки справа
          .actions
            form(action='/' + t.id + '/delete' + (status !== 'all' ? '?status=' + status : ''), method='post')
              button.btn.btn-danger(type='submit') Удалить
  else
    p.muted Задач по выбранному фильтру нет.

  p
    a.btn.btn-light(href=('/new' + (status !== 'all' ? '?status=' + status : ''))) + Добавить задачу
